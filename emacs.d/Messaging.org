* MBSYNC

** Configure the sync
#+begin_src conf :tangle ~/.mbsyncrc
   IMAPAccount exchange
   Host ballard.amazon.com
   Port 1993
   User davdunc
   PassCmd "cat ~/.local/password-mail"
   SSLType IMAPS
   CertificateFile ~/Maildirs/root-certificates.pem
   PipelineDepth 1

#+end_src
#+begin_src conf :tangle ~/.mbsyncrc
   IMAPStore exchange-remote
   Account exchange

#+end_src
#+begin_src conf :tangle ~/.mbsyncrc
  MaildirStore exchange-local
  Path ~/Maildirs/Amazon/
  Inbox ~/Maildirs/Amazon/INBOX
  SubFolders Verbatim
  Flatten .

#+end_src
#+begin_src conf :tangle ~/.mbsyncrc
  Channel exchange
  Far :exchange-remote:
  Near :exchange-local:
  Patterns INBOX INBOX* %!Calendar Sent% Outbox Partners Tasks% Archives* Deleted* !*.sbd !Partners
  Create Near
  Expunge Both
  Sync All
  SyncState *

#+end_src

* Mu4e
I am using Mu4e at work. The first configuration will be for my work config and I do not expect it to be helpful for anyone besides me.

#+begin_src emacs-lisp :tangle ~/.emacs.d/user_lisp/messaging.el :mkdirp t
    (if (eq 'darwin system-type)
	(add-to-list 'load-path "/opt/homebrew/share/emacs/site-lisp/mu/mu4e")
	)
  (require 'smtpmail)
  (require 'starttls
	   :ensure t)
  (use-package gnutls
    :ensure t)
  (use-package mu4e
    :ensure nil
    :defer 20
    :load-path "/opt/homebrew/share/emacs/site-lisp/mu/mu4e"
    :config
    (require 'org-mu4e)
    (require 'smtpmail)

    (setq mu4e-update-interval (* 120 60)
	  mu4e-get-mail-command "mbsync exchange gmail"
	  mu4e-maildir "~/Maildirs"
	  mu4e-completing-read-function #'ivy-completing-read
	  mu4e-change-filenames-when-moving t
	  message-kill-buffer-on-exit t
	  mu4e-headers-skip-duplicates t
	  mu4e-compose-signature-auto-include nil
	  mu4e-view-show-images t
	  mu4e-view-show-addresses t
	  mu4e-attachment-dir "~/Downloads"
	  mu4e-use-fancy-chars t
	  mu4e-headers-auto-update t)


  )
#+end_src
